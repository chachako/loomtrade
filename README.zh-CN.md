# Loomtrade

**Loomtrade** 是一个为加密合约市场设计的专业平台，旨在帮助用户构建、自动化并高效管理 AI 驱动的交易代理。用户可以通过自然语言定义交易策略，之后由先进的大型语言模型 (LLM) 驱动的智能代理负责处理复杂的市场分析与交易执行。

## 核心特性

*   🌐 **自然语言定义策略:** 用您最熟悉的母语描述交易思路，Loomtrade 能将其准确转化为可执行的自动化交易策略。
*   🤖 **智能 AI 代理:** 基于尖端 LLM 技术，代理能够深度理解用户策略、精准分析市场数据、辅助做出交易决策并有效管理仓位。
*   🛠️ **丰富的工具集:** 代理通过一系列实用工具与主流交易所及数据源高效连接，执行市场分析、订单操作和账户管理等任务。
*   📊 **数据库驱动的记忆与学习:** 所有交易活动、代理决策及关键市场观察均被记录于结构化数据库，这不仅使代理能从历史经验中学习进化，也为用户提供了深入复盘和分析的数据基础。
*   ⚙️ **个性化风格与风控:** 用户可以定义自己偏好的交易风格（例如：稳健型、趋势跟踪型、高频短线等）并配置细致的风险管理参数，确保代理行为符合个人的风险承受范围。
*   💬 **实时互动与监控:** 用户可随时与交易代理进行对话，下达指令，查询特定决策的逻辑依据，并通过集成的仪表盘实时追踪其全部活动和表现。
*   📈 **TradingView 集成:** 在用户熟悉的 TradingView 图表界面上，直观展示市场行情数据以及代理执行的各项交易活动。
*   🔍 **决策过程透明化:** 提供代理“思考过程”（即 LLM 的详细交互记录）及所有已执行操作的日志，确保决策链路的完整透明。

## 工作原理 - 高层次概述

Loomtrade 以成熟的 **智能代理循环 (Agentic Loop)** 为核心原则运行，AI 代理依照以下步骤周而复始地工作：

1.  **感知 (Perceive):** 持续监控市场动态（包括价格、各类技术指标、订单簿深度等）并接收用户的实时输入或指令。
2.  **推理 (Reason):** 利用 LLM 结合用户预设的交易策略、交易风格以及存储在数据库中的历史经验与知识，对感知到的信息进行深度分析和推理。LLM 被设计为能够理解数据库的表结构和字段含义，从而能指导工具进行精确的数据提取。
3.  **决策 (Decide):** 基于全面的推理分析，LLM 决定下一步最合适的行动方案——可能是调用其他工具获取补充信息，或是直接执行交易（开仓/平仓/调整），也可能向用户发起问询以澄清指令或确认高风险操作。
4.  **行动 (Act):** 交易代理根据 LLM 的决策，调用相应的内部工具（例如，通过 `create_order` 工具执行交易指令，或通过 `query_database` 工具从数据库检索相关的历史表现数据）来完成具体操作。
5.  **学习与反思 (Learn & Reflect):** 在每笔重要交易（尤其是平仓操作）完成后，系统会引导 LLM 对该笔交易的完整过程——包括决策依据、市场状况、执行结果及盈亏等——进行全面的复盘与反思。这些宝贵的反思结论将被结构化地存储到数据库中，形成一个持续增长、可供查询的经验知识库，用以指导未来的交易决策。

该循环机制赋予了 Loomtrade 代理高度的自主性，使其能够基于用户设定的策略框架和从历史数据中习得的经验，主动适应不断变化的市场环境，并精准执行交易。

## 快速上手指南

1.  **注册账户:** 在 Loomtrade 官方网站（未来上线）完成账户注册。
2.  **连接交易所:**
    *   进入“交易所管理”界面。
    *   选择您计划使用的加密货币合约交易所（如 Binance, OKX 等主流平台）。
    *   请务必安全地输入您的 API 密钥 (API Key) 和私钥 (Secret Key)，并严格遵守最小权限原则：仅为 API Key 授予“读取账户信息”和“执行交易”的权限，**严禁开启“提现”权限**，以最大限度保障您的资金安全。
3.  **配置 LLM 提供商:**
    *   进入“LLM 设置”界面。
    *   选择您偏好或已订阅的 LLM 服务提供商（如 OpenAI, Google Gemini, Anthropic Claude 等），并指定具体的模型版本。
    *   输入您在该提供商处获取的 LLM API 密钥。
4.  **定义您的首个 AI 交易代理:**
    *   **选择交易风格:** 您可以选择一个平台预设的交易风格模板（例如“稳健型趋势跟踪者”），或根据自己的偏好详细自定义风险参数。
    *   **创建交易策略:** 通过自然语言编辑器定义您的交易方法。例如：
        *   偏好于更严格的详细规则：“若 BTC 15 分钟图 RSI 指标低于 30，且 MACD 指标柱为正值，则使用账户资金的 2% 开设多头仓位。止损设为平均真实波幅 (ATR) 的 1.5 倍，止盈目标为初始风险的 3 倍。”
        *   偏好于赋予 AI 更大的决策权：“请担任我的山寨币组合的谨慎管理人。每隔 1 小时扫描一次市场，关注那些具有强劲增长势头且市值中等的山寨币。当出现至少两种不同技术指标确认的强烈看涨信号时，以较小仓位（例如占子组合资金的 1-2%）入场。请根据趋势强度动态调整止盈目标，并执行追踪止损策略。”
    *   **激活代理:** 仔细检查所有配置无误后，即可激活您的 Loomtrade 交易代理。
5.  **监控与交互:**
    *   通过集成的仪表盘实时观察代理的交易活动、账户的盈亏变化以及当前的具体持仓情况。
    *   您可以随时通过聊天界面与代理进行互动，获取最新的状态更新，或对其行为进行即时调整。
    *   若想深入了解代理的决策过程，可查阅“代理思考日志”选项卡，那里会提供完全透明的记录。

## 使用场景

*   **自动化日内交易策略:** 将需要高度纪律性和快速反应的日内短线操作交给 Loomtrade 执行。
*   **执行复杂条件订单:** 通过自然语言便捷定义包含多个触发条件和逻辑组合的入场、出场及仓位管理规则，实现远超交易所基础订单类型的复杂操作。
*   **趋势跟踪与波段交易:** 设计能够敏锐识别并稳定跟随中长线市场趋势的交易代理，捕捉波段行情。
*   **(未来功能) 事件驱动交易:** 配置代理，使其能够根据市场突发新闻、重要经济数据发布或特定的链上活动自动触发相应交易行为。
*   **(未来功能) 合约投资组合智能再平衡:** 根据用户设定的资产配置目标和风险偏好，自动调整和优化多个加密合约之间的资金分配。

## ⚠️ 重要风险提示

*   **高风险投资警告：交易加密货币合约具有高度的投机性质，伴随着巨大的潜在亏损风险，并不适合所有投资者。** 请确保您只使用能够承受损失的资金进行投资。
*   **历史业绩不代表未来：** Loomtrade 平台展示的任何历史回测数据或过往实盘交易表现，仅作为信息参考，绝不构成对未来盈利的任何形式的承诺或保证。
*   **AI 与 LLM 的局限性：** 人工智能及大型语言模型并非完美无缺，它们在数据理解、市场分析和决策过程中可能出现偏差、错误解读或生成并非最优的建议（即“AI幻觉”）。Loomtrade 致力于提供决策过程的透明化工具，但作为用户，您始终是账户的最终责任人，需要积极监控交易代理的运行状况并自主管理相关风险。
*   **市场突变风险：** 自动化交易系统可能无法在所有情况下都完美适应市场的极端波动、流动性枯竭或不可预见的“黑天鹅”事件。
*   **技术性风险：** 任何软件系统都可能存在未被发现的漏洞或因网络连接问题导致的故障。尽管我们尽最大努力确保 Loomtrade 系统的稳定和安全，但技术故障的可能性始终存在。
*   **理性投资，责任自负：** 请始终以负责任的态度使用 Loomtrade，并确保您的所有交易决策均在您个人风险承受能力和财务状况允许的范围之内。如果您是初次接触此类工具或交易，强烈建议从模拟交易或小额资金开始尝试。

## 技术栈概览 - 规划中

*   **前端:** 采用现代 JavaScript 框架 (例如 React、Vue 或 Svelte，并结合 TypeScript 以提升代码质量和可维护性)。
*   **后端:** Node.js (使用 TypeScript) 或 Python (例如 FastAPI 框架)，根据具体模块需求选择。
*   **数据库:** PostgreSQL 作为主要的结构化数据库，用于存储用户配置、交易历史、代理的核心记忆与学习数据等。
*   **实时通信:** WebSockets 技术，确保前端与后端之间的数据能够实时、高效地同步。
*   **图表库:** 集成 TradingView Lightweight Charts™，为用户提供专业且熟悉的图表分析界面。

## 未来路线图 - 概念

*   **V1.0 (MVP 最小可行产品):** 实现核心的 AI 代理功能，支持通过自然语言定义交易策略，完成与部分关键交易所的对接，提供基础的仪表盘监控功能和必要的交易执行工具。
*   **V1.x (迭代改进阶段):** 推出功能更强大的可视化策略构建器，支持更多常用的技术指标，扩展可选择的 LLM 模型范围，优化风险管理模块，提供更详尽的交易分析报告。
*   **V2.0 (高级功能阶段):** 加入完整的策略回测引擎；实现基于数据库历史交易反思分析的 Agent 高级学习与进化能力；开发更复杂的市场扫描和交易机会发现工具。

---

*本文档为 Loomtrade 项目的高层次概述。关于详细的设计规范与技术实现细节，请参阅 `blueprints/technical_specs.md` 文档。*